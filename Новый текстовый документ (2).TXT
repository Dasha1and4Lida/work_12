#include <iostream>
#include <string>
#include <locale.h>

using namespace std;

int main() {
    // Настройка для русского языка
    setlocale(LC_ALL, "Russian");
    
    string playerName = "Игрок";
    int choice;
    int score = 0;
    int lives = 3;
    bool gameRunning = true;
    
    // Приветствие
    cout << "======================================\n";
    cout << "         ВИКТОРИНА ПО IT\n";
    cout << "======================================\n\n";
    
    while (gameRunning) {
        // Главное меню
        cout << "========== ГЛАВНОЕ МЕНЮ ==========\n";
        cout << "Игрок: " << playerName << " | Жизни: " << lives << " | Очки: " << score << "\n\n";
        cout << "[1] Начать игру\n";
        cout << "[2] Настройки\n";
        cout << "[3] Правила\n";
        cout << "[4] Выйти\n\n";
        cout << "Выберите пункт: ";
        cin >> choice;
        
        if (choice == 1) {
            // Начать игру
            cout << "\n========== НАЧАЛО ИГРЫ ==========\n";
            
            // Примеры вопросов
            string questions[5] = {
                "Какой язык программирования создал Бьёрн Страуструп?",
                "Что означает аббревиатура 'HTML'?",
                "Какой оператор используется для сравнения в C++?",
                "Что такое компилятор?",
                "Какая структура данных работает по принципу 'LIFO'?"
            };
            
            string answers[5] = {
                "C++",
                "HyperText Markup Language",
                "==",
                "Программа, переводящая код в машинный язык",
                "Стек"
            };
            
            int userAnswer;
            
            // Игровой цикл
            for (int i = 0; i < 5 && lives > 0; i++) {
                cout << "\n[ ] Вопрос " << (i + 1) << ": " << questions[i] << "\n";
                cout << "\n[1] Ответить на вопрос\n";
                cout << "[2] Пропустить вопрос (потерять жизнь)\n";
                cout << "Выберите: ";
                cin >> userAnswer;
                
                if (userAnswer == 1) {
                    string userInput;
                    cin.ignore(); // Очистка буфера
                    cout << "Ваш ответ: ";
                    getline(cin, userInput);
                    
                    // Проверка ответа (упрощенная)
                    if (userInput == answers[i] || 
                        (i == 0 && (userInput == "C++" || userInput == "c++" || userInput == "С++"))) {
                        score += 10;
                        cout << "\n[+] Правильно! +10 очков!\n";
                    } else {
                        lives--;
                        cout << "\n[-] Неправильно! Потеряна жизнь. Осталось жизней: " << lives << "\n";
                    }
                } else if (userAnswer == 2) {
                    lives--;
                    cout << "\n[-] Вопрос пропущен. Потеряна жизнь. Осталось жизней: " << lives << "\n";
                }
                
                cout << "Текущий счет: " << score << " | Жизни: " << lives << "\n";
            }
            
            // Результат игры
            cout << "\n========== ИГРА ОКОНЧЕНА ==========\n";
            if (lives > 0) {
                cout << "Поздравляем! Вы прошли викторину!\n";
            } else {
                cout << "Вы проиграли! Закончились жизни.\n";
            }
            cout << "Ваш итоговый счет: " << score << " очков\n";
            cout << "Оставшиеся жизни: " << lives << "\n\n";
            
            // Сброс для новой игры
            score = 0;
            lives = 3;
            
        } else if (choice == 2) {
            // Настройки
            cout << "\n========== НАСТРОЙКИ ==========\n";
            cout << "Текущее имя: " << playerName << "\n";
            cout << "Введите новое имя: ";
            cin >> playerName;
            cout << "Имя изменено на: " << playerName << "\n\n";
            
        } else if (choice == 3) {
            // Правила
            cout << "\n========== ПРАВИЛА ИГРЫ ==========\n";
            cout << "1. Игра состоит из 5 вопросов по IT\n";
            cout << "2. За правильный ответ: +10 очков\n";
            cout << "3. За неправильный ответ: -1 жизнь\n";
            cout << "4. Можно пропустить вопрос, но потеряешь жизнь\n";
            cout << "5. Игра заканчивается при потере всех жизней\n";
            cout << "6. Цель: набрать как можно больше очков\n\n";
            cout << "Нажмите любую цифру и Enter для возврата в меню: ";
            int temp;
            cin >> temp;
            cout << "\n";
            
        } else if (choice == 4) {
            // Выйти
            cout << "\nСпасибо за игру! До свидания!\n";
            gameRunning = false;
            
        } else {
            cout << "\n[!] Неверный выбор! Попробуйте снова.\n\n";
        }
    }
    
    return 0;
}